
{% extends "base.html" %}

{% block title %}賴田捕手：訓練紀錄{% endblock %}

{% block main %}

<!-- 修改號碼 -->

<div class="row">
  <div class="col">
    <h1>
        department {{ now_num_records[0] }}
    </h1>
    <h1>
        now is {{ now_num_records[2] }}
    </h1>
    <form name="form" id="form" method="POST" action="{{url_for('submit')}}">
      <div class="form-row">
      <div class="col-12 mt-3">
        <input id="edit_now_num" type="text" class="form-control" name="change_num" placeholder="clinic number">
      </div>
      <div class="col-12 mt-3 pt-3">
        <button id="submit_btn" onclick="return false" type="submit" class="btn btn-primary">Submit
        </button>
        <button id="reset_btn" onclick="resetNum()" class="btn btn-danger">Reset
        </button>
      </div>
      </div>
      </div>
    </form>
  </div>
</div>

<!-- token記錄 -->

<div class="row">
  <div class="col">
  <h1><i class="fas fa-barcode"></i> 訓練紀錄</h1>
  </div>
</div>

<!-- 宣告一個巨集 -->
{% macro easy_row(data, tag) -%}
{% for record in data %}
<div class="row">
  {% for item in record %}
  <div class="col">
  <{{ tag }}>{{ item }}</{{ tag }}>
  </div>
  {% endfor %}
</div>
{% endfor %}
{%- endmacro %}

<!-- 宣告一些等等會用來創造欄位說明的變數 -->
{% set col_names = (("token_id", "token_num"),) %}

<!-- 用巨集快速創造欄位名稱 -->
{{ easy_row(col_names, "h2") }}

<!-- 將所有token紀錄列在下面 -->
{{ easy_row(token_list, "p") }}

<script>
  $(document).ready(function(){
    $("#submit_btn").click(function(){
      input_data = $("#edit_now_num").val()
        if( input_data=="" ){
            alert("此為必填");
            eval($("#edit_now_num").focus());       
        }else if( !isNaN(Number(input_data)) ){
          document.form.submit();
        }else{
          alert("請輸入數字");
          eval($("#edit_now_num").focus());       
 
        }
    })
 })
  // function checkInt(input) {
  //   try {
  //     input_int = parseInt(input, 10)
  //     return true
  //   } catch (e) {
  //     return false
  //   }
  // }
  function resetNum(){
    document.getElementById("edit_now_num").value = "0";
    document.form.submit();
  }
</script>
{% endblock %}